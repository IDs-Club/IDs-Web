<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
<title>所有图书 &ndash; IDs 书友会</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="IDs书友会是澳洲从事互联网行业的设计师，开发者，爱好者及苹果粉丝的聚会。我们在 2012 年发起线下聚会，接受所有公司，个人对 IT 及设计类书籍的捐赠。所有书籍，经整理后向同行们提供免费借阅，并定期举行聚会探讨。同时我们发起海外华人开源社区，希望更多书友会成员能一起参与开源项目。">
<meta name="author" content="idsclub.org">
<!-- Le styles -->
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="assets/css/idsclub.css" rel="stylesheet">

<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if lt IE 8]>
<link href="assets/css/font-awesome-ie7.css" rel="stylesheet">
<![endif]-->

<!-- Fav and touch icons -->
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="apple-touch-icon-150-precomposed.png">
</head>
<body>
<div class="container-fixed">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
      	<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="/">
          <img src="assets/img/logo.png" width="25" /> 书友会
        </a>
        <div class="nav-collapse collapse pull-right">
          <ul class="nav nav-pills">
            <li><a href="index.html" rel="tooltip" title="首页"><i class="icon-home"></i></a></li>
            <li><a href="about.html" rel="tooltip" title="关于 IDs Club"><i class="icon-exclamation-sign"></i></a></li>
            <li><a href="forums.html" rel="tooltip" title="群组讨论"><i class="icon-group"></i></a></li>
            <li class="active"><a href="bookshelf.html" rel="tooltip" title="图书一览"><i class="icon-book"></i></a></li>
            <li><a href="opensource.html" rel="tooltip" title="开源代码"><i class="icon-github"></i></a></li>
            <li><a href="http://idsclub.diandian.com" rel="tooltip" title="活动"><i class="icon-bullhorn"></i></a></li>
            <li><a href="faq.html" rel="tooltip" title="问题"><i class="icon-question-sign"></i></a></li>
            <li><a href="contact.html" rel="tooltip" title="联系"><i class="icon-envelope"></i></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>

  <div class="container bookshelf">
	<div class="row-fluid">
	  <div class="span9">
	    <h2><i class="icon-book"></i> <span id="title">所有图书</span></h2>
	    <hr />
	    <div class="row-fluid">
	      <ol id="bookshelf" class="clearfix">
		    <li style="list-style:none">
		      <img src="assets/img/spinner.gif"> 正在用力的加载啊亲...请稍后
		    </li>
 	      </ol>
	    </div>
	  </div>
	  <aside class="span3" id="category">
	  	<a class="btn btn-xlarge btn-primary" id="download" href="http://tflig.ht/Y79oDU"><i class="icon-download-alt"></i> 申请 App 测试版</a>
	  	<h3><i class="icon-filter"></i> 分类浏览</h3>
	  	<ul id="cats">
	  	  <li><img src="assets/img/spinner.gif"> 正在用力的加载啊亲...</li>
	  	</ul>
	  	<h3><i class="icon-heart"></i> 感谢赞助商个人与单位</h3>
	  	<ul id="thanks">
	  	  <li><a href="http://classad.yoozi.com.au/" rel="tooltip" title="澳洲游子租房、买车、交朋友和找工作"><img src="http://aucdn.yoozi.net/assets/imgs/header/logo.png"></a></li>
	  	  <li><a href="http://www.lanye.com.au/" rel="tooltip" title="澳洲城市生活指南"><img src="http://www.lanye.com.au/assets/images/header/logonew.png"></a></li>
	  	</ul>
	  	<h3><i class="icon-leaf"></i> 近期书友会活动</h3>
	  	<iframe  src="http://www.eventbrite.com.au/calendar-widget?eid=4919208485" frameborder="0" height="686" width="195" marginheight="0" marginwidth="0" scrolling="no" allowtransparency="true"></iframe>
	  </aside>
	</div>
  </div> <!-- /container -->
</div>

<hr class="bottom" />
<footer id="footer">
  <div class="container">
    <div class="pull-left">
      <a href="https://github.com/cnsaturn" rel="tooltip" title="感谢游子Saturn">书友会精心制作</a> 
      &copy; 2012 <a href="http://www.idsclub.org/">idsclub.org</a>
    </div>
    <div class="pull-right weibo">
  	  <a href="http://weibo.com/idsclub"><img src="assets/img/weibo_16x16.png"> 我们在新浪微博</a>
    </div>
  </div>
</footer>

<script src="assets/js/jquery-1.7.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/idsclub.js"></script>
<script type="text/javascript">
/// The IDs Club bookshelf 
/// http://github.com/IDs-Club/IDs-Web
/// 
///
/// Authored by Saturn <yangg.hu@yoozi.org> from yoozi.com.au
/// No Copyright, feel free to modify, redistribute and/or resell of this program.

// Dirty global vars
var bookshelf = $('#bookshelf');
var catid = yoozi.app.qs('catid') || '',
	title = yoozi.app.qs('title') || '';

// Add a book to the bookshelf
var addBook = function(book){
	var $item = $("<li>").addClass("book span4 ");
	var $link = $("<a>").attr("href", 'books.html?isbn=' + book.isbn10).appendTo($item);
	$link.append($("<h2>").text(book.title));
	$link.append($("<h3>").text(book.author));
	$link.append($("<p>").html($("<img>").attr('src', book.img)));
	$item.appendTo(bookshelf);
};

// Fetch all books
var fetchAllBooks = function(uri){
	$.getJSON(uri, function (books) {
		bookshelf.empty();
		var len = $.map(books, function(n, i) { return i; }).length;
		if (len > 0) {
    		$.each(books, function (i, book) {
		        addBook(book);
          	});
      	} else {
      		bookshelf.html("<li style='list-style:none'>还未上架任何图书噢亲，考虑捐献一本闲置的技术书籍、造福人类？</li>");
      	}
	});
};

// Fetch all categories for the bookshelf
var fetchAllCats = function(uri) {
	$.getJSON(uri, function (cats) {
		var placeholder = $('#cats');
		placeholder.empty();
		var len = $.map(cats, function(n, i) { return i; }).length;
		if (len > 0) {
    		$.each(cats, function (i, cat) {
		        var $item = $("<li>");
		       	var $link = $("<a>")
		       		.attr("href", 'bookshelf.html?catid=' + cat.catid + '&title=' + cat.cat_name)
		       		.appendTo($item);
		       	$link.append("<i class='icon-tag'></i> " + cat.cat_name);
		       	$item.appendTo(placeholder);
          	});
      	} else {
      		$("<li>没有任何类目喔亲。</li>").appendTo(placeholder);
      	}
	});
};

// Fetch books by category
var fetchBooksByCategory = function(uri, catid, title) {
	$('#title').html(title + "图书 <a href='bookshelf.html' style='font-size:12px;'><i class='icon-chevron-left'></i> 返回</a>");
	bookshelf.html("<li style=\"list-style:none\"><img src=\"assets\/img\/spinner.gif\"> 正在用力的加载啊亲...请稍后</li>");
	$.getJSON(uri + catid, function (books) {
		bookshelf.empty();
		var len = $.map(books, function(n, i) { return i; }).length;
		if (len > 0) {
    		$.each(books, function (i, book) {
		        addBook(book);
          	});
      	} else {
      		bookshelf.html("<li style='list-style:none'>还没任何图书哟亲，考虑捐献一本闲置的技术书籍、造福人类？</li>");
      	}
	});
}

// Let's rock!
fetchAllCats('http://api.idsclub.org/api/index.php?auth_token=fa41eade0f06e181360e0a0d1b387007&method=getCategories&callback=?');

if(catid && title)
  fetchBooksByCategory(
  	'http://api.idsclub.org/api/index.php?auth_token=fa41eade0f06e181360e0a0d1b387007&method=getBooksByCategory&callback=?&catid=',
  	catid,
  	title
  );
else
  fetchAllBooks('http://api.idsclub.org/api/index.php?auth_token=fa41eade0f06e181360e0a0d1b387007&method=getAllBooks&callback=?');
</script>
</body>
</html>