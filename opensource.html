<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
<title>开源项目 &ndash; IDs 书友会</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="IDs书友会是澳洲从事互联网行业的设计师，开发者，爱好者及苹果粉丝的聚会。我们在 2012 年发起线下聚会，接受所有公司，个人对 IT 及设计类书籍的捐赠。所有书籍，经整理后向同行们提供免费借阅，并定期举行聚会探讨。同时我们发起海外华人开源社区，希望更多书友会成员能一起参与开源项目。">
<meta name="author" content="idsclub.org">
<!-- Le styles -->
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="assets/css/idsclub.css" rel="stylesheet">

<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if lt IE 8]>
<link href="assets/css/font-awesome-ie7.css" rel="stylesheet">
<![endif]-->

<!-- Fav and touch icons -->
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-150-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="apple-touch-icon-150-precomposed.png">
<noscript><meta http-equiv="refresh" content="0; url=http://classad.yoozi.com.au/noscript" /></noscript>
</head>
<body>
<div class="container-fixed">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="/">
          <img src="assets/img/logo.png" width="25" /> 书友会
        </a>
        <div class="nav-collapse collapse">
          <ul class="nav nav-pills pull-right">
            <li><a href="index.html" rel="tooltip" title="首页"><i class="icon-home"></i></a></li>
            <li><a href="about.html" rel="tooltip" title="关于 IDs Club"><i class="icon-exclamation-sign"></i></a></li>
            <li><a href="forums.html" rel="tooltip" title="群组讨论"><i class="icon-group"></i></a></li>
            <li><a href="bookshelf.html" rel="tooltip" title="图书一览"><i class="icon-book"></i></a></li>
            <li class="active"><a href="opensource.html" rel="tooltip" title="开源代码"><i class="icon-github"></i></a></li>
            <li><a href="http://idsclub.diandian.com/" rel="tooltip" title="活动"><i class="icon-bullhorn"></i></a></li>
            <li><a href="faq.html" rel="tooltip" title="问题"><i class="icon-question-sign"></i></a></li>
            <li><a href="contact.html" rel="tooltip" title="联系"><i class="icon-envelope"></i></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>

  <div class="container github">
	<div class="row-fluid">
	  <h2><i class="icon-github"></i> 书友会开源项目</h2>
	</div>
	<div class="row-fluid">
	  <div class="span4 header" id="statistics">
	  	<h3>统计</h3>
	  	<p>
          <a href="https://github.com/IDs-Club/repositories">
          	<span id="num-repos"><img src="assets/img/spinner.gif"></span> 个公开代码仓库
          </a>
          <br>
          <a href="https://github.com/IDs-Club">
          	<span id="num-members"><img src="assets/img/spinner.gif"></span> 位成员
          </a>
        </p>
        <p class="email"><a href="mailto:opensource@idsclub.org">opensource@idsclub.org</a></p>
	  </div>
	  <div class="span8 header" id="recently-updated">
          <h3>最近更新 <a href="https://github.com/IDs-Club/repositories">View All on GitHub</a></h3>
          <ol id="recently-updated-repos"></ol>
	  </div>
	</div>
	<ol id="repos" class="row-fluid">
	</ol>
  </div> <!-- /container -->
</div>

<hr class="bottom" />
<footer id="footer">
  <div class="container">
    <div class="pull-left">
      <a href="https://github.com/cnsaturn" rel="tooltip" title="感谢游子Saturn">书友会精心制作</a> 
      &copy; 2012 <a href="http://www.idsclub.org/">idsclub.org</a>
    </div>
    <div class="pull-right weibo">
  	  <a href="http://weibo.com/idsclub"><img src="assets/img/weibo_16x16.png"> 我们在新浪微博</a>
    </div>
  </div>
</footer>

<script src="assets/js/jquery-1.7.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/idsclub.js"></script>
<script src="assets/js/strftime.js"></script>
<script type="text/javascript">
(function ($, undefined) {

  // Put custom repo URL's in this object, keyed by repo name.
  var repoUrls = {};

  function repoUrl(repo) {
    return repoUrls[repo.name] || repo.html_url;
  }

  // Put custom repo descriptions in this object, keyed by repo name.
  var repoDescriptions = {};

  function repoDescription(repo) {
    return repoDescriptions[repo.name] || repo.description;
  }

  function addRecentlyUpdatedRepo(repo) {
    var $item = $("<li>");

    var $name = $("<a>").attr("href", repo.html_url).text(repo.name);
    $item.append($("<span>").addClass("name").append($name));

    var $time = $("<a>").attr("href", repo.html_url + "/commits").text(strftime("%h %e, %Y", repo.pushed_at));
    $item.append($("<span>").addClass("time").append($time));

    $item.append('<span class="bullet">&sdot;</span>');

    var $watchers = $("<a>").attr("href", repo.html_url + "/watchers").text(repo.watchers + " stargazers");
    $item.append($("<span>").addClass("watchers").append($watchers));

    $item.append('<span class="bullet">&sdot;</span>');

    var $forks = $("<a>").attr("href", repo.html_url + "/network").text(repo.forks + " forks");
    $item.append($("<span>").addClass("forks").append($forks));

    $item.appendTo("#recently-updated-repos");
  }

  function addRepo(repo) {
    var $item = $("<li>").addClass("repo span3 " + (repo.language || '').toLowerCase());
    var $link = $("<a>").attr("href", repoUrl(repo)).appendTo($item);
    $link.append($("<h2>").text(repo.name));
    $link.append($("<h3>").text(repo.language));
    $link.append($("<p>").text(repoDescription(repo)));
    $item.appendTo("#repos");
  }

  function addRepos(repos, page) {
    repos = repos || [];
    page = page || 1;

    var uri = "https://api.github.com/orgs/IDs-Club/repos?callback=?"
            + "&per_page=100"
            + "&page="+page;

    $.getJSON(uri, function (result) {
      if (result.data && result.data.length > 0) {
        repos = repos.concat(result.data);
        addRepos(repos, page + 1);
      }
      else {
        $(function () {
          $("#num-repos").text(repos.length);

          // Convert pushed_at to Date.
          $.each(repos, function (i, repo) {
            repo.pushed_at = new Date(repo.pushed_at);

            var weekHalfLife  = 1.146 * Math.pow(10, -9);

            var pushDelta    = (new Date) - Date.parse(repo.pushed_at);
            var createdDelta = (new Date) - Date.parse(repo.created_at);

            var weightForPush = 1;
            var weightForWatchers = 1.314 * Math.pow(10, 7);

            repo.hotness = weightForPush * Math.pow(Math.E, -1 * weekHalfLife * pushDelta);
            repo.hotness += weightForWatchers * repo.watchers / createdDelta;
          });

          // Sort by highest # of watchers.
          repos.sort(function (a, b) {
            if (a.hotness < b.hotness) return 1;
            if (b.hotness < a.hotness) return -1;
            return 0;
          });

          $.each(repos, function (i, repo) {
            addRepo(repo);
          });

          // Sort by most-recently pushed to.
          repos.sort(function (a, b) {
            if (a.pushed_at < b.pushed_at) return 1;
            if (b.pushed_at < a.pushed_at) return -1;
            return 0;
          });

          $.each(repos.slice(0, 3), function (i, repo) {
            addRecentlyUpdatedRepo(repo);
          });
        });
      }
    });
  }
  addRepos();

  $.getJSON("https://api.github.com/orgs/IDs-Club/members?callback=?", function (result) {
    var members = result.data;

    $(function () {
      $("#num-members").text(members.length);
    });
  });
})(jQuery);
</script>
</body>
</html>